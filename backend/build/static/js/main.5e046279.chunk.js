(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{43:function(e,t,r){},69:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(1),s=r.n(a),c=r(34),i=r.n(c),o=r(16);var l=function(){return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsxs)("div",{className:"w3-container w3-center w3-blue",style:{padding:"2rem"},children:[Object(n.jsx)("h1",{className:"w3-jumbo",children:"Tweet - Quick Twitter"}),Object(n.jsx)("button",{className:"w3-button w3-pink",style:{marginRight:"1rem"},children:Object(n.jsx)("a",{href:"/login",children:"Login"})}),Object(n.jsx)("button",{className:"w3-button w3-pink",children:Object(n.jsx)("a",{href:"/register",children:"Register"})})]}),Object(n.jsxs)("div",{className:"w3-container w3-blue",style:{padding:"2rem",marginTop:"2rem"},children:[Object(n.jsx)("h2",{children:"Lorem ipsum dolor sit amet"}),Object(n.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer consectetur libero nibh, non sodales urna malesuada nec. Sed tortor eros, blandit eget fringilla at, gravida a nibh. Etiam dui nulla, aliquam vitae purus a, auctor malesuada arcu. Vestibulum venenatis orci nisl, sed elementum leo tincidunt eget. Nullam convallis nisi in."})]}),Object(n.jsxs)("div",{className:"w3-container w3-blue",style:{padding:"2rem",marginTop:"2rem"},children:[Object(n.jsx)("h2",{children:"Lorem ipsum dolor sit amet"}),Object(n.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer consectetur libero nibh, non sodales urna malesuada nec. Sed tortor eros, blandit eget fringilla at, gravida a nibh. Etiam dui nulla, aliquam vitae purus a, auctor malesuada arcu. Vestibulum venenatis orci nisl, sed elementum leo tincidunt eget. Nullam convallis nisi in."})]}),Object(n.jsxs)("div",{className:"w3-container w3-blue",style:{padding:"2rem",marginTop:"2rem"},children:[Object(n.jsx)("h2",{children:"Lorem ipsum dolor sit amet"}),Object(n.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer consectetur libero nibh, non sodales urna malesuada nec. Sed tortor eros, blandit eget fringilla at, gravida a nibh. Etiam dui nulla, aliquam vitae purus a, auctor malesuada arcu. Vestibulum venenatis orci nisl, sed elementum leo tincidunt eget. Nullam convallis nisi in."})]})]})};r(43);var d=function(){var e=s.a.useState(localStorage.getItem("theme")||"light"),t=Object(o.a)(e,2),r=t[0],a=t[1];s.a.useEffect((function(){"dark"===r?document.body.classList.add("dark"):document.body.classList.remove("dark")}),[r]);var c=localStorage.getItem("token"),i={name:c?"Settings":"Login",link:c?"/settings":"/login"},l={name:c?"Logout":"Register",link:c?"/logout":"/register"};return Object(n.jsxs)("div",{className:"w3-bar w3-black",children:[Object(n.jsx)("a",{className:"w3-bar-item w3-button",href:"/",children:"Tweet"}),Object(n.jsxs)("div",{style:{float:"right"},children:[Object(n.jsx)("button",{className:"w3-bar-item w3-btn",onClick:function(){"dark"===r?(localStorage.setItem("theme","light"),a("light")):(localStorage.setItem("theme","dark"),a("dark"))},children:"dark"===r?"\ud83d\udd06":"\ud83c\udf19"}),Object(n.jsx)("a",{className:"w3-bar-item w3-button",href:i.link,children:i.name}),Object(n.jsx)("a",{className:"w3-bar-item w3-button",href:l.link,children:l.name})]})]})},u=r(8),m=r(9),h=r(11),b=r(10);var j=function(e){return Object(n.jsx)("div",{className:"w3-pale-red w3-text-red w3-border w3-border-red w3-round-large",style:{padding:"1rem",marginTop:"1rem"},children:e.message})},w=r(15),g=r.n(w),p=r(19),x=r(4),O=r.n(x);function f(e,t){return v.apply(this,arguments)}function v(){return(v=Object(p.a)(g.a.mark((function e(t,r){var n,a,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("/api/login",{email:t,pwd:r});case 2:return n=e.sent,e.next=5,n;case 5:if(a=e.sent,!(s=a.data).error){e.next=11;break}return e.abrupt("return",s.error);case 11:return localStorage.setItem("token",s.token),localStorage.setItem("refreshToken",s.refreshToken),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return N.apply(this,arguments)}function N(){return(N=Object(p.a)(g.a.mark((function e(){var t,r,n,a,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.prev=1,e.next=4,O.a.post("/api/checkiftokenexpire",{},{headers:{Authorization:"Bearer "+t}});case 4:return r=e.sent,e.next=7,r;case 7:return n=e.sent,a=n.data,e.abrupt("return",a.success);case 12:if(e.prev=12,e.t0=e.catch(1),console.log("p"),s=localStorage.getItem("refreshToken")){e.next=19;break}return localStorage.removeItem("token"),e.abrupt("return",!1);case 19:return O.a.post("/api/refreshtoken",{},{headers:{Authorization:"Bearer ".concat(s)}}).then((function(e){localStorage.setItem("token",e.data.token)})),e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}var k=function(e){Object(h.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={err:""},e.login=function(t){t.preventDefault(),f(document.getElementById("email").value,document.getElementById("password").value).then((function(t){!0===t?window.location="/":e.setState({err:t})}))},e}return Object(m.a)(r,[{key:"componentDidMount",value:function(){y().then((function(e){e&&(window.location="/")}))}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"w3-card-4",style:{margin:"2rem"},children:[Object(n.jsx)("div",{className:"w3-container w3-blue w3-center w3-xlarge",children:"LOGIN"}),Object(n.jsxs)("div",{className:"w3-container",children:[this.state.err.length>0&&Object(n.jsx)(j,{message:"Check your form and try again! (".concat(this.state.err,")")}),Object(n.jsxs)("form",{onSubmit:this.login,children:[Object(n.jsxs)("p",{children:[Object(n.jsx)("label",{htmlFor:"email",children:"Email"}),Object(n.jsx)("input",{type:"email",className:"w3-input w3-border",id:"email"})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("label",{htmlFor:"password",children:"Password"}),Object(n.jsx)("input",{type:"password",className:"w3-input w3-border",id:"password"})]}),Object(n.jsx)("p",{children:Object(n.jsx)("button",{type:"submit",className:"w3-button w3-blue",children:"Login"})})]})]})]})}}]),r}(a.Component),S=function(e){Object(h.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={err:""},e.register=function(t){t.preventDefault(),O.a.post("/api/register",{email:document.getElementById("email").value,username:document.getElementById("username").value,pwd:document.getElementById("password").value}).then((function(t){t.data.error?e.setState({err:t.data.error}):window.location="/login"}))},e}return Object(m.a)(r,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"w3-card-4",style:{margin:"2rem"},children:[Object(n.jsx)("div",{className:"w3-container w3-blue w3-center w3-xlarge",children:"REGISTER"}),Object(n.jsxs)("div",{className:"w3-container",children:[this.state.err.length>0&&Object(n.jsx)(j,{message:"Check your form and try again! (".concat(this.state.err,")")}),Object(n.jsxs)("form",{onSubmit:this.register,children:[Object(n.jsxs)("p",{children:[Object(n.jsx)("label",{htmlFor:"email",children:"Email"}),Object(n.jsx)("input",{type:"email",class:"w3-input w3-border",id:"email"})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("label",{htmlFor:"username",children:"Username"}),Object(n.jsx)("input",{type:"text",class:"w3-input w3-border",id:"username"})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("label",{htmlFor:"password",children:"Password"}),Object(n.jsx)("input",{type:"password",class:"w3-input w3-border",id:"password"})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("button",{type:"submit",class:"w3-button w3-blue",children:"Register"}),this.state.register&&Object(n.jsx)("p",{children:"You're registered!"})]})]})]})]})}}]),r}(a.Component),E=r(36),I=r(2);var T=function(e){return Object(n.jsxs)("div",{className:"w3-card w3-border w3-border-gray w3-round-large",style:{marginTop:"2rem"},children:[Object(n.jsxs)("header",{className:"w3-container w3-opacity w3-light-gray",style:{padding:"1rem"},children:["@",e.author]}),Object(n.jsxs)("div",{className:"w3-container",style:{padding:"2rem"},children:[Object(n.jsxs)("h2",{className:"w3-xxlarge",children:[Object(n.jsx)("span",{className:"w3-opacity",children:e.title}),e.isOwner&&Object(n.jsx)("button",{className:"w3-right w3-button w3-red w3-large w3-hover-pale-red w3-round-large",onClick:function(){return t=e.id,void O.a.delete("/api/deletetweet/"+t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){console.log(e.data),window.location.reload()}));var t},children:"Delete"})]}),Object(n.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content}})]}),Object(n.jsxs)("footer",{className:"w3-container w3-center w3-large",children:[Object(n.jsx)("button",{className:"w3-button",style:{marginRight:"2rem"},children:"Like"}),Object(n.jsx)("button",{className:"w3-button",style:{marginRight:"2rem"},children:"Retweet"}),Object(n.jsx)("button",{className:"w3-button",children:"Reply"})]})]})},C=r(35),L=function(e){Object(h.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={content:"<p>I have to edit this!</p>",titleErr:"",contentErr:"",formErr:""},e.handleEditorChange=function(t,r){e.setState({content:t})},e.submitForm=function(t){t.preventDefault(),0!==e.state.content.length?0!==document.getElementById("title").value.length?O.a.post("/api/addtweet",{title:document.getElementById("title").value,content:e.state.content},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){t.data.success?window.location.reload():e.setState({formErr:t.data.error})})):e.setState({titleErr:"Add a title!"}):e.setState({contentErr:"Add some data to the content!"})},e}return Object(m.a)(r,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"w3-modal w3-animate-opacity",id:"addTweet",children:Object(n.jsxs)("div",{className:"w3-modal-content w3-card",children:[Object(n.jsxs)("header",{className:"w3-container w3-blue",children:[Object(n.jsx)("span",{className:"w3-button w3-display-topright w3-hover-none w3-hover-text-white",onClick:function(){document.getElementById("addTweet").style.display="none"},children:"X"}),Object(n.jsx)("h2",{children:"Add tweet"})]}),Object(n.jsxs)("form",{className:"w3-container",onSubmit:this.submitForm,children:[this.state.formErr.length>0&&Object(n.jsx)(j,{message:this.state.formErr}),Object(n.jsxs)("div",{className:"w3-section",children:[Object(n.jsxs)("p",{children:[Object(n.jsx)("label",{htmlFor:"title",children:"Title"}),Object(n.jsx)("input",{type:"text",id:"title",className:"w3-input w3-border w3-margin-bottom"}),Object(n.jsx)("small",{className:"w3-text-gray",children:this.state.titleErr})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)(C.Editor,{initialValue:"<p>This is the initial content of the editor</p>",apiKey:"h4lob04s358sx82cxoploj3qas5qx4szcdgohhxgja5z5bq2",init:{height:300,menubar:!1,statusbar:!1,toolbar_mode:"sliding",plugins:["advlist autolink lists link image imagetools media emoticons preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic underline strikethrough | image anchor media |                                         alignleft aligncenter alignright alignjustify |                                         outdent indent | bulllist numlist | fullscreen preview | emoticons help",contextmenu:"bold italic underline indent outdent help"},onEditorChange:this.handleEditorChange}),Object(n.jsx)("small",{className:"w3-text-gray",children:this.state.contentErr})]}),Object(n.jsx)("p",{children:Object(n.jsx)("button",{type:"submit",className:"w3-button w3-blue",children:"Post"})})]})]})]})})}}]),r}(s.a.Component),B=function(e){Object(h.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={tweets:[],currentUser:{username:""}},e}return Object(m.a)(r,[{key:"componentDidMount",value:function(){var e=this;O.a.get("/api/tweets").then((function(t){e.setState({tweets:t.data.reverse()})})),setTimeout((function(){O.a.get("/api/getcurrentuser",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(t){e.setState({currentUser:t.data})}))}),200)}},{key:"render",value:function(){var e=this;return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsxs)("div",{className:"w3-container w3-jumbo",style:{margin:"3rem",paddingLeft:"1rem"},children:[Object(n.jsx)("h1",{children:"Tweets"}),Object(n.jsx)("button",{className:"w3-button w3-blue w3-large",onClick:function(){document.getElementById("addTweet").style.display="block"},children:"Add tweet"})]}),Object(n.jsx)(L,{}),Object(n.jsx)("div",{className:"w3-container",children:0===this.state.tweets.length?Object(n.jsx)("p",{className:"w3-xlarge w3-opacity",style:{marginLeft:"2rem"},children:"No tweets! Create one"}):this.state.tweets.map((function(t,r){return Object(n.jsx)(T,{id:t.id,title:t.title,content:t.content,author:t.user.username,isOwner:e.state.currentUser.username===t.user.username},r)}))})]})}}]),r}(s.a.Component),A=function(e){Object(h.a)(r,e);var t=Object(b.a)(r);function r(){return Object(u.a)(this,r),t.apply(this,arguments)}return Object(m.a)(r,[{key:"componentDidMount",value:function(){!function(){if(localStorage.getItem("token")){var e=localStorage.getItem("token");O.a.post("/api/logout/access",{},{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){e.data.error?console.error(e.data.error):localStorage.removeItem("token")}))}if(localStorage.getItem("refreshToken")){var t=localStorage.getItem("refreshToken");O.a.post("/api/logout/refresh",{},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){e.data.error?console.error(e.data.error):localStorage.removeItem("refreshToken")}))}localStorage.clear(),setTimeout((function(){return window.location="/"}),500)}()}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"w3-container w3-xlarge",children:Object(n.jsx)("p",{children:"Please wait, logging you out..."})})}}]),r}(s.a.Component),D=function(e){Object(h.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={currentSetting:"main",err:""},e.changePassword=function(t){t.preventDefault(),O.a.post("/api/changepassword",{password:document.getElementById("password").value,npassword:document.getElementById("npassword").value},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){t.data.error?e.setState({err:t.data.error}):(alert("Password changed! Logging you out..."),window.location="/logout")}))},e.deleteAccount=function(e){e.preventDefault(),window.confirm("Are you sure you want to delete your account? THIS CANNOT BE UNDONE. ALL OF YOUR POSTS WILL BE DELETED")&&O.a.delete("/api/deleteaccount",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){e.data.error?alert("An error occurred: "+e.data.error):(alert("Your account has been deleted. We're sad to see you go :(. Now, anyone can sign up with your username. Logging you out..."),window.location="/logout")}))},e}return Object(m.a)(r,[{key:"componentDidMount",value:function(){localStorage.getItem("token")||(window.location="/login")}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{className:"w3-container",style:{margin:"3rem"},children:Object(n.jsxs)("div",{className:"w3-card w3-border w3-round-large",children:[Object(n.jsx)("header",{className:"w3-container w3-xlarge w3-blue",style:{padding:"0.5rem",paddingLeft:"3rem"},children:"Settings"}),Object(n.jsxs)("div",{className:"w3-container",children:[this.state.err.length>0&&Object(n.jsx)(j,{message:this.state.err}),"main"===this.state.currentSetting&&Object(n.jsxs)("div",{style:{margin:"1rem"},children:[Object(n.jsx)("h1",{className:"w3-xxlarge",children:"Settings"}),Object(n.jsx)("hr",{className:"w3-border-top w3-border-black"}),Object(n.jsx)("p",{children:"Choose a setting from below:"}),Object(n.jsxs)("ul",{className:"w3-ul w3-border w3-hoverable",children:[Object(n.jsx)("li",{onClick:function(){return e.setState({currentSetting:"cpwd"})},style:{cursor:"pointer"},className:"w3-hover-light-gray",children:"Change password"}),Object(n.jsx)("li",{onClick:function(){return e.setState({currentSetting:"del"})},style:{cursor:"pointer"},className:"w3-text-red w3-hover-pale-red w3-hover-text-red",children:"Delete account"})]})]}),"cpwd"===this.state.currentSetting&&Object(n.jsxs)("div",{style:{margin:"1rem"},children:[Object(n.jsx)("h1",{className:"w3-xxlarge",children:"Change password"}),Object(n.jsx)("hr",{className:"w3-border-top w3-border-black"}),Object(n.jsx)("button",{className:"w3-button w3-blue",onClick:function(){return e.setState({currentSetting:"main"})},children:"\xab Back"}),Object(n.jsxs)("form",{onSubmit:this.changePassword,children:[Object(n.jsxs)("p",{children:[Object(n.jsx)("label",{htmlFor:"password",children:"Old password"}),Object(n.jsx)("input",{type:"password",id:"password",className:"w3-input w3-border"})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("label",{htmlFor:"npassword",children:"New password"}),Object(n.jsx)("input",{type:"password",id:"npassword",className:"w3-input w3-border"})]}),Object(n.jsx)("p",{children:Object(n.jsx)("button",{type:"submit",className:"w3-button w3-blue",children:"Submit"})})]})]}),"del"===this.state.currentSetting&&Object(n.jsxs)("div",{style:{margin:"1rem"},children:[Object(n.jsx)("h1",{className:"w3-xxlarge w3-text-red",children:"Delete account"}),Object(n.jsx)("hr",{className:"w3-border-top w3-border-black"}),Object(n.jsx)("button",{className:"w3-button w3-blue",onClick:function(){return e.setState({currentSetting:"main"})},children:"\xab Back"}),Object(n.jsx)("p",{children:Object(n.jsx)("button",{className:"w3-button w3-red w3-large",onClick:this.deleteAccount,children:"DELETE ACCOUNT"})})]})]})]})})}}]),r}(s.a.Component);var F=function(){return Object(n.jsxs)("div",{className:"w3-container w3-center",style:{margin:"3rem"},children:[Object(n.jsx)("h1",{className:"w3-jumbo",children:"404"}),Object(n.jsx)("p",{className:"w3-xxlarge",children:"The page you were searching for was not found. Double check your URL and try again"}),Object(n.jsx)("button",{type:"button",className:"w3-button w3-blue",onClick:function(){return window.location="/"},children:"\xab Back"})]})};var R=function(){var e=s.a.useState(!1),t=Object(o.a)(e,2),r=t[0],a=t[1];return y().then((function(e){return a(e)})),Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(d,{}),Object(n.jsx)(E.a,{children:Object(n.jsxs)(I.c,{children:[Object(n.jsx)(I.a,{path:"/",exact:!0,children:r?Object(n.jsx)(B,{}):Object(n.jsx)(l,{})}),Object(n.jsx)(I.a,{path:"/login",exact:!0,component:k}),Object(n.jsx)(I.a,{path:"/register",exact:!0,component:S}),Object(n.jsx)(I.a,{path:"/logout",exact:!0,component:A}),Object(n.jsx)(I.a,{path:"/settings",exact:!0,component:D}),Object(n.jsx)(I.a,{component:F})]})})]})};i.a.render(Object(n.jsx)(R,{}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.5e046279.chunk.js.map