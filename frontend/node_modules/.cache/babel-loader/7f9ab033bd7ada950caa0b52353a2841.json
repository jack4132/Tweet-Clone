{"ast":null,"code":"import _classCallCheck from\"/Users/jacksonthounaojam/Downloads/student/Web devop/React/project/twitter-clone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jacksonthounaojam/Downloads/student/Web devop/React/project/twitter-clone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jacksonthounaojam/Downloads/student/Web devop/React/project/twitter-clone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jacksonthounaojam/Downloads/student/Web devop/React/project/twitter-clone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from'react';import Alert from\"./Alert\";import Axios from\"axios\";var UserSettings=/*#__PURE__*/function(_React$Component){_inherits(UserSettings,_React$Component);var _super=_createSuper(UserSettings);function UserSettings(){var _this;_classCallCheck(this,UserSettings);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={currentSetting:\"main\",err:\"\"};_this.changePassword=function(e){e.preventDefault();Axios.post(\"/api/changepassword\",{password:document.getElementById(\"password\").value,npassword:document.getElementById(\"npassword\").value},{headers:{Authorization:\"Bearer \"+localStorage.getItem(\"token\")}}).then(function(res){if(res.data.error){_this.setState({err:res.data.error});}else{alert(\"Password changed! Logging you out...\");window.location=\"/logout\";}});};_this.deleteAccount=function(e){e.preventDefault();var x=window.confirm(\"Are you sure you want to delete your account? THIS CANNOT BE UNDONE. ALL OF YOUR POSTS WILL BE DELETED\");if(x){Axios.delete(\"/api/deleteaccount\",{headers:{Authorization:\"Bearer \"+localStorage.getItem(\"token\")}}).then(function(res){if(res.data.error){alert(\"An error occurred: \"+res.data.error);}else{alert(\"Your account has been deleted. We're sad to see you go :(. Now, anyone can sign up with your username. Logging you out...\");window.location=\"/logout\";}});}};return _this;}_createClass(UserSettings,[{key:\"componentDidMount\",//values: main, cpwd, del\nvalue:function componentDidMount(){if(!localStorage.getItem(\"token\")){window.location=\"/login\";}}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(\"div\",{className:\"w3-container\",style:{margin:\"3rem\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"w3-card w3-border w3-round-large\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"w3-container w3-xlarge w3-blue\",style:{padding:\"0.5rem\",paddingLeft:\"3rem\"},children:\"Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"w3-container\",children:[this.state.err.length>0&&/*#__PURE__*/_jsx(Alert,{message:this.state.err}),this.state.currentSetting===\"main\"&&/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"1rem\"},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"w3-xxlarge\",children:\"Settings\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"w3-border-top w3-border-black\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Choose a setting from below:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"w3-ul w3-border w3-hoverable\",children:[/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return _this2.setState({currentSetting:\"cpwd\"});},style:{cursor:\"pointer\"},className:\"w3-hover-light-gray\",children:\"Change password\"}),/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return _this2.setState({currentSetting:\"del\"});},style:{cursor:\"pointer\"},className:\"w3-text-red w3-hover-pale-red w3-hover-text-red\",children:\"Delete account\"})]})]}),this.state.currentSetting===\"cpwd\"&&/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"1rem\"},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"w3-xxlarge\",children:\"Change password\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"w3-border-top w3-border-black\"}),/*#__PURE__*/_jsx(\"button\",{className:\"w3-button w3-blue\",onClick:function onClick(){return _this2.setState({currentSetting:\"main\"});},children:\"\\xAB Back\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.changePassword,children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Old password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",className:\"w3-input w3-border\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"npassword\",children:\"New password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"npassword\",className:\"w3-input w3-border\"})]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w3-button w3-blue\",children:\"Submit\"})})]})]}),this.state.currentSetting===\"del\"&&/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"1rem\"},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"w3-xxlarge w3-text-red\",children:\"Delete account\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"w3-border-top w3-border-black\"}),/*#__PURE__*/_jsx(\"button\",{className:\"w3-button w3-blue\",onClick:function onClick(){return _this2.setState({currentSetting:\"main\"});},children:\"\\xAB Back\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"w3-button w3-red w3-large\",onClick:this.deleteAccount,children:\"DELETE ACCOUNT\"})})]})]})]})});}}]);return UserSettings;}(React.Component);export default UserSettings;","map":{"version":3,"sources":["/Users/jacksonthounaojam/Downloads/student/Web devop/React/project/twitter-clone/frontend/src/components/UserSettings.jsx"],"names":["React","Alert","Axios","UserSettings","state","currentSetting","err","changePassword","e","preventDefault","post","password","document","getElementById","value","npassword","headers","Authorization","localStorage","getItem","then","res","data","error","setState","alert","window","location","deleteAccount","x","confirm","delete","margin","padding","paddingLeft","length","cursor","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Alert from \"./Alert\";\nimport Axios from \"axios\";\n\nclass UserSettings extends React.Component {\n\n    state = {currentSetting: \"main\", err: \"\"} //values: main, cpwd, del\n\n    componentDidMount() {\n        if (!localStorage.getItem(\"token\")) {\n            window.location = \"/login\"\n        }\n    }\n\n    changePassword = (e) => {\n        e.preventDefault();\n        Axios.post(\"/api/changepassword\", {\n            password: document.getElementById(\"password\").value,\n            npassword: document.getElementById(\"npassword\").value\n        }, {\n            headers: {\n                Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n            }\n        })\n            .then(res => {\n                if (res.data.error) {\n                    this.setState(\n                        {err: res.data.error}\n                    )\n                } else {\n                    alert(\"Password changed! Logging you out...\")\n                    window.location = \"/logout\"\n                }\n            })\n    }\n\n    deleteAccount = (e) => {\n        e.preventDefault();\n        let x = window.confirm(\"Are you sure you want to delete your account? THIS CANNOT BE UNDONE. ALL OF YOUR POSTS WILL BE DELETED\")\n        if (x) {\n            Axios.delete(\"/api/deleteaccount\", {headers: {Authorization: \"Bearer \" + localStorage.getItem(\"token\")}})\n                .then(res => {\n                    if (res.data.error) {\n                        alert(\"An error occurred: \" + res.data.error)\n                    } else {\n                        alert(\"Your account has been deleted. We're sad to see you go :(. Now, anyone can sign up with your username. Logging you out...\")\n                        window.location = \"/logout\"\n                    }\n                })\n        }\n    }\n\n    render() {\n        return (<div className=\"w3-container\" style={{margin: \"3rem\"}}>\n            <div className=\"w3-card w3-border w3-round-large\">\n                <header className=\"w3-container w3-xlarge w3-blue\"\n                        style={{padding: \"0.5rem\", paddingLeft: \"3rem\"}}>Settings\n                </header>\n                <div className=\"w3-container\">\n                    {this.state.err.length > 0 && <Alert message={this.state.err}/>}\n                    {this.state.currentSetting === \"main\" && <div style={{margin: \"1rem\"}}>\n                        <h1 className=\"w3-xxlarge\">Settings</h1>\n                        <hr className=\"w3-border-top w3-border-black\"/>\n                        <p>Choose a setting from below:</p>\n                        <ul className=\"w3-ul w3-border w3-hoverable\">\n                            <li onClick={() => this.setState({currentSetting: \"cpwd\"})} style={{cursor: \"pointer\"}}\n                                className=\"w3-hover-light-gray\">Change password\n                            </li>\n                            <li onClick={() => this.setState({currentSetting: \"del\"})} style={{cursor: \"pointer\"}}\n                                className=\"w3-text-red w3-hover-pale-red w3-hover-text-red\">Delete account\n                            </li>\n                        </ul>\n                    </div>}\n                    {this.state.currentSetting === \"cpwd\" && <div style={{margin: \"1rem\"}}>\n                        <h1 className=\"w3-xxlarge\">Change password</h1>\n                        <hr className=\"w3-border-top w3-border-black\"/>\n                        <button className=\"w3-button w3-blue\"\n                                onClick={() => this.setState({currentSetting: \"main\"})}>&laquo; Back\n                        </button>\n                        <form onSubmit={this.changePassword}>\n                            <p>\n                                <label htmlFor=\"password\">Old password</label>\n                                <input type=\"password\" id=\"password\" className=\"w3-input w3-border\"/>\n                            </p>\n                            <p>\n                                <label htmlFor=\"npassword\">New password</label>\n                                <input type=\"password\" id=\"npassword\" className=\"w3-input w3-border\"/>\n                            </p>\n                            <p>\n                                <button type=\"submit\" className=\"w3-button w3-blue\">Submit</button>\n                            </p>\n                        </form>\n                    </div>}\n                    {this.state.currentSetting ===\"del\" && <div style={{margin: \"1rem\"}}>\n                        <h1 className=\"w3-xxlarge w3-text-red\">Delete account</h1>\n                        <hr className=\"w3-border-top w3-border-black\"/>\n                        <button className=\"w3-button w3-blue\"\n                                onClick={() => this.setState({currentSetting: \"main\"})}>&laquo; Back\n                        </button>\n                        <p>\n\n                        <button className=\"w3-button w3-red w3-large\" onClick={this.deleteAccount}>DELETE ACCOUNT</button>\n                        </p>\n                    </div>}\n                </div>\n            </div>\n        </div>)\n    }\n}\n\nexport default UserSettings;"]},"metadata":{},"sourceType":"module"}